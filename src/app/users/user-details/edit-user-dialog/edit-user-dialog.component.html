<h2 class="mat-title">{{'edit-user.title' | content}}</h2>

<p>{{'edit-user.description' | content}}</p>

<form [formGroup]="editForm" (submit)="onSubmit()" novalidate>
  <p>
    <mat-form-field>
      <input type="text" matInput placeholder="{{'edit-user.name.placeholder' | content}}" formControlName="name">
    </mat-form-field>
    <app-form-errors [targetFormControl]="f.name" [messages]="errors.name"
      (errorChanges)="updateErrors('name', $event)">
    </app-form-errors>
  </p>

  <p>
    <mat-form-field>
      <input type="email" matInput placeholder="{{'edit-user.email.placeholder' | content}}" formControlName="email">
    </mat-form-field>
    <app-form-errors [targetFormControl]="f.email" [messages]="errors.email"
      (errorChanges)="updateErrors('email', $event)">
    </app-form-errors>
  </p>

  <p>
    <mat-form-field>
      <mat-label>{{'edit-user.role.placeholder' | content}}</mat-label>
      <mat-select formControlName="role">
        <mat-option *ngFor="let r of roles" [value]="r">{{'edit-user.role.' + r + '.text' | content}}</mat-option>
      </mat-select>
    </mat-form-field>
    <app-form-errors [targetFormControl]="f.role" [messages]="errors.role"
      (errorChanges)="updateErrors('role', $event)">
    </app-form-errors>
  </p>

  <p *ngIf="error" class="mat-warn-text">{{error}}</p>

  <div class="form-actions">
    <ng-container *ngIf="!loading; else spinner">
      <button type="button" mat-button (click)="this.dialogRef.close()">{{'edit-user.button.cancel.text' | content}}</button>
      <button type="submit" mat-button>{{'edit-user.button.save.text' | content}}</button>
    </ng-container>
    <ng-template #spinner>
      <mat-spinner diameter="30"></mat-spinner>
    </ng-template>
  </div>
</form>
